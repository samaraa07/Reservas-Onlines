{% extends "base.html" %}
{% block title %}Notificações{% endblock %}
{% block content %}
  <div class="container">
    <h2>Notificações</h2>

    {% if notificacoes %}
      <div style="margin-bottom:1rem;">
        <a href="?filtro=nao_lidas" class="btn btn-secundario">Somente não lidas</a>
        <a href="?filtro=todas" class="btn btn-secundario">Todas</a>
      </div>

      <ul>
      {% for n in notificacoes %}
        <li {% if not n.lida %}class="nao-lida"{% endif %}>
          {{ n.criado_em.strftime('%d/%m/%Y %H:%M') }} — {{ n.mensagem }}

          {# Botões de aprovação / reprovação visíveis apenas para admins #}
          {% if user.perfil == 'admin' and n.tipo == 'pedido_admin' %}
            <a href="{{ url_for('aprovar_admin', user_id=n.alvo_id) }}" class="btn btn-success">Aprovar</a>
            <a href="{{ url_for('reprovar_admin', user_id=n.alvo_id) }}" class="btn btn-danger">Reprovar</a>
          {% elif user.perfil == 'admin' and n.tipo == 'pedido_profissional' %}
            <a href="{{ url_for('aprovar_profissional', user_id=n.alvo_id) }}" class="btn btn-success">Aprovar</a>
            <a href="{{ url_for('reprovar_profissional', user_id=n.alvo_id) }}" class="btn btn-danger">Reprovar</a>
          {% endif %}
        </li>
      {% endfor %}
      </ul>
    {% else %}
      <p>Sem notificações.</p>
    {% endif %}
  </div>
{% endblock %}